<div class="container">
  <div class="container-header-button">
    <app-button (click)="openModal()" (keydown)="onKeyDownButton($event)"
      >Add Category</app-button
    >
  </div>

  <app-modal [isVisible]="isModalVisible" (close)="closeModal()">
    <h2 class="poppins-regular modal-title">Create Category</h2>
    <form
      [formGroup]="createCategoryForm"
      (ngSubmit)="createCategory()"
      class="form"
    >
      <div class="container-inputs">
        <app-input-with-error
          formControlName="categoryName"
          [errorMessage]="categoryNameError"
          [control]="categoryName"
        ></app-input-with-error>

        <app-text-area-with-error
          formControlName="categoryDescription"
          [errorMessage]="categoryDescriptionError"
          [control]="categoryDescription"
        ></app-text-area-with-error>
      </div>

      <div class="center">
        <app-button>Create Category</app-button>
      </div>
    </form>
  </app-modal>

  <table class="table">
    <thead>
      <tr class="table__header">
        <th
          class="table__cell center-y"
          (click)="changeSortOrder('categoryName')"
          (keydown)="onKeyDown($event, 'categoryName')"
          tabindex="0"
          aria-label="Sort by Category Name"
        >
          Category Name
          <lucide-icon
            [name]="isAscending ? 'arrow-down-a-z' : 'arrow-up-a-z'"
            size="16"
          ></lucide-icon>
        </th>
        <th class="table__cell">Category Description</th>
      </tr>
    </thead>
    <tbody>
      <tr class="table__row" *ngFor="let category of categories">
        <td class="table__cell">{{ category.categoryName }}</td>
        <td class="table__cell">{{ category.categoryDescription }}</td>
      </tr>
    </tbody>
  </table>

  <div class="pagination">
    <button
      class="pagination__button"
      (click)="changePage(currentPage - 1)"
      [disabled]="currentPage === 0"
    >
      <lucide-icon name="MoveLeft" size="14"></lucide-icon>
    </button>

    <ng-container *ngFor="let page of getPagesToShow(); let i = index">
      <button
        class="pagination__page"
        [class.active]="currentPage === page"
        (click)="changePage(page)"
      >
        {{ page + 1 }}
      </button>
    </ng-container>

    <span *ngIf="shouldShowEllipsis()">...</span>

    <button
      *ngIf="shouldShowLastPage()"
      class="pagination__page"
      (click)="changePage(totalPages - 1)"
    >
      {{ totalPages }}
    </button>

    <button
      class="pagination__button"
      (click)="changePage(currentPage + 1)"
      [disabled]="currentPage + 1 === totalPages"
    >
      <lucide-icon name="MoveRight" size="14"></lucide-icon>
    </button>
  </div>
</div>
